kind: Module
type: container
name: model-orchestrator
services:
  - name: dagster
    ports:
      - name: http
        containerPort: 3000
    dependencies:
      - generate-synthetic-data
    limits:
      memory: 10240
    devMode:
      sync:
        - target: /app
          source: src
          mode: two-way
      
tasks:
  - name: run-alec
    command: ["python", "main.py"]
    timeout:
      100000
    artifacts:
      - source: /app/data/applications/*.parquet
        target: applications
      - source: /app/data/portfolios/*.parquet
        target: portfolios
      - source: /app/data/outcomes/*.parquet
        target: outcomes
tests:
  - name: test-alec
    disabled: true
    command: ["dagster", "pipeline", "execute", "-f", "main.py", "--preset", "unittest"]
    artifacts:
      - source: /app/*.parquet
        target: results
